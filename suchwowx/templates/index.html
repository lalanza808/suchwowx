<!DOCTYPE html>
<html>
  {% include 'includes/head.html' %}
  <body>
  <section class="section">
    <div class="container">
      {% include 'includes/navbar.html' %}

      {% if get_flashed_messages(with_categories=true) %}
        <p>
          </br>
          You can run your own local IPFS instance and maintain metadata and artwork,
          </br>
          try installing the software and running the following:
        </p>
        <code>$ ipfs daemon</code>
      </br></br>
      {% endif %}

      {% if memes %}
        {% for _meme in memes | batch(4) %}
        <div class="columns">

          {% for meme in _meme %}
          <div class="card">
            <div class="card-image">
              <figure class="image">
                <a href="{{ url_for('meta.meme', meme_id=meme.id) }}" up-preload up-follow=".container">
                  {% if meme.upload_path.endswith('mp4') %}
                    <video class="img-fluid" {% if not request.MOBILE %}autoplay{% else %}controls{% endif %} muted loop>
                      <source src="{{ url_for('meta.uploaded_file', filename=meme.upload_path) }}" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  {% else %}
                    <img alt="{{ meme.title }}" src="{{ url_for('meta.uploaded_file', filename=meme.upload_path) }}" width="200px" class="img-fluid" style="" />
                  {% endif %}
                </a>
              </figure>
            </div>
            <div class="card-content">
              <div class="media">
                <div class="media-left">
                  <!-- <figure class="image is-48x48">
                    <img src="https://bulma.io/images/placeholders/96x96.png" alt="Placeholder image">
                  </figure> -->
                </div>
                <div class="media-content">
                  <p class="title is-4">John Smith</p>
                  <p class="subtitle is-6">@johnsmith</p>
                </div>
              </div>

              <div class="content">
                {{ meme.description }}
                <br>
                <time datetime="2016-1-1">{{ meme.create_date.strftime('%H:%M UTC - %d %b %Y') }}</time>
              </div>
            </div>
          </div>

          {% endfor %}
        </div>
        {% endfor %}
      {% endif %}

    </div>
  </section>
  {% include 'includes/footer.html' %}
  </body>
</html>
